#!/bin/bash

set -e

stop_rdc() {
    #stop RDC if running
    systemctl stop rdc
    return 0
}

reload_systemd() {
    systemctl daemon-reload
    return 0
}

rm_pyc() {
    # remove pyc file generated by python
    rm -rf /@CPACK_PACKAGING_INSTALL_PREFIX@/@CMAKE_INSTALL_LIBEXECDIR@/@RDC@/python_binding/__pycache__
}

case "$1" in
   remove | upgrade )
       stop_rdc
       unlink /lib/systemd/system/rdc.service
       reload_systemd
       rm_pyc
   ;;
   purge)
   ;;
   *)
       exit 0
   ;;
esac
